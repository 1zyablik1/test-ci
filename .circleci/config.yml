jobs:
  build:
    docker:
      - image: 1zyablik1/unity
        # монтируем папку внутри контейнера
      - volume:
          name: unity-prj
          path: /unityPrj
    steps:
      - checkout
        # указываем checkout в корневую папку проекта
        # чтобы путь /unityPrj/ был правильным
        # при монтировании в контейнер
        path: /
      - run:
          name: Build Android
          command: unity -batchmode -projectPath /unityPrj/test-ci/ -executeMethod BuildScript.BuildAndroid -quit
      - run:
          name: Display Unity log
          command: cat /root/.config/unity3d/Editor.log

workflows:
  version: 2
  build-and-deploy:
    jobs:
      - build
